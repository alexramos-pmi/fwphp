import{_ as b,u as k,e as d,o as u,b as a,a as y,f as N,g as o,h as S,i as m,d as c,v as p,n as h,F as w}from"./app-v0I5nIHM.js";import{d as i,m as g}from"./index-C6cCJQYD.js";import{M as x,a as l}from"./js.cookie-5ay4t5Hp.js";const P={class:"logo-container"},j={key:0,id:"preloader"},B={class:"logo-header"},V=["src"],I={class:"logo-body"},M={class:"middle"},D={__name:"Login",setup(E){const t=k();v(),f();function v(){i.Inertia.on("start",()=>{t.commit("updateStateProperty",{objectName:"loading",value:!0})}),i.Inertia.on("finish",()=>{t.commit("updateStateProperty",{objectName:"loading",value:!1})})}function f(){g.apiGet("login/check").then(s=>{s.data.check&&i.Inertia.visit(`${t.state.urlBase}`)})}function _(){t.commit("updateStateProperty",{objectName:"loading",value:!0});let s=new FormData;s.append("email",t.state.login.email),s.append("password",t.state.login.password),g.apiPost("login",s).then(e=>{t.commit("updateStateProperty",{objectName:"loading",value:!1}),r("success",e.data.success),l.set("_userid",e.data.user.userid),l.set("_username",e.data.user.username),l.set("_useremail",e.data.user.useremail),l.set("_userlevel",e.data.user.userlevel),l.set("_userlevelname",e.data.user.userlevelname),i.Inertia.visit(`${t.state.urlBase}`)}).catch(e=>{t.commit("updateStateProperty",{objectName:"loading",value:!1}),r("error",e.response.data.error)})}function r(s,e){t.commit("updateStateProperty",{objectName:"snackbar",value:{type:s,message:e,status:!0},mode:"replace"})}return(s,e)=>(u(),d(w,null,[a("div",P,[o(t).state.loading?(u(),d("div",j,e[2]||(e[2]=[a("span",{class:"loader"},null,-1)]))):N("",!0),a("div",B,[a("img",{src:`${o(t).state.urlBase}/img/logo.png`},null,8,V)]),a("div",I,[a("form",{onSubmit:S(_,["prevent"])},[e[5]||(e[5]=a("span",null,"Acesse sua conta",-1)),a("div",M,[a("div",null,[e[3]||(e[3]=a("label",null,[a("i",{class:"fa-solid fa-envelope"}),c(" E-mail: ")],-1)),m(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>o(t).state.login.email=n)},null,512),[[p,o(t).state.login.email]])]),a("div",null,[e[4]||(e[4]=a("label",null,[a("i",{class:"fa-solid fa-lock"}),c(" Senha: ")],-1)),m(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>o(t).state.login.password=n)},null,512),[[p,o(t).state.login.password]])])]),e[6]||(e[6]=a("button",null,"Acessar minha conta",-1))],32),a("span",{id:"snackbar",class:h(o(t).state.messages.success?"success":"error")},null,2)])]),y(x)],64))}},A=b(D,[["__scopeId","data-v-d07ee9f1"]]);export{A as default};

import{u as x,e as $,o as S,b as i,d as _,t as w,c as C,w as o,r,a,g as s,h as E,q as D}from"./main-CYPWvOCH.js";import{m as V,n as g}from"./model-aYdN6bid.js";import{c as h}from"./clear-BTugyQxE.js";const p={__name:"Label",props:{label:{type:String,required:!0}},setup(v){x();const e=v;return(f,u)=>(S(),$("span",null,[u[0]||(u[0]=i("span",{class:"red--text"},"*",-1)),_(" "+w(e.label),1)]))}},q={class:"modal-body"},F={class:"card-body"},T={class:"modal-footer justify-content-end",style:{display:"flex",gap:"15px"}},z={__name:"Create",setup(v){const e=x();function f(){e.commit("updateStateProperty",{objectName:"loading",value:!0});let m=e.state.user.id,t="usuarios",d=new FormData;d.append("name",e.state.user.name),d.append("email",e.state.user.email),d.append("password",e.state.user.password),d.append("level",e.state.user.level),m<=0?(t=`${t}/store`,V.apiPost(t,d).then(l=>{e.commit("updateStateProperty",{objectName:"loading",value:!1}),u("success",l.data.success),g(`${e.state.urlBase}/usuarios`)}).catch(l=>{e.commit("updateStateProperty",{objectName:"loading",value:!1}),u("error",l.response.data.error)})):(t=`${t}/update`,V.apiPut(t,m,d).then(l=>{e.commit("updateStateProperty",{objectName:"loading",value:!1}),u("success",l.data.success),g(`${e.state.urlBase}/usuarios`)}).catch(l=>{e.commit("updateStateProperty",{objectName:"loading",value:!1}),u("error",l.response.data.error)}))}function u(m,t){e.commit("updateStateProperty",{objectName:"snackbar",value:{type:m,message:t,status:!0},mode:"replace"}),m==="success"&&b()}function b(){h.user()}return(m,t)=>{const d=r("v-card-title"),l=r("v-text-field"),c=r("v-col"),N=r("v-autocomplete"),P=r("v-row"),y=r("v-btn"),j=r("v-card-text"),k=r("v-card"),B=r("v-dialog"),U=r("v-container");return S(),C(U,null,{default:o(()=>[a(B,{modelValue:s(e).state.modal,"onUpdate:modelValue":t[4]||(t[4]=n=>s(e).state.modal=n),"max-width":"600px",persistent:""},{default:o(()=>[a(k,null,{default:o(()=>[a(d,{class:"text-h5"},{default:o(()=>[_(w(s(e).state.user.id>0?"Editar":"Adicionar")+" Usuário ",1)]),_:1}),a(j,null,{default:o(()=>[i("form",{onSubmit:E(f,["prevent"])},[i("div",q,[i("div",F,[a(P,{dense:""},{default:o(()=>[a(c,{cols:"12"},{default:o(()=>[a(l,{modelValue:s(e).state.user.name,"onUpdate:modelValue":t[0]||(t[0]=n=>s(e).state.user.name=n),label:"Nome",variant:"outlined"},{label:o(()=>[a(p,{style:{"font-weight":"normal"},label:"Nome"})]),_:1},8,["modelValue"])]),_:1}),a(c,{cols:"12"},{default:o(()=>[a(l,{modelValue:s(e).state.user.email,"onUpdate:modelValue":t[1]||(t[1]=n=>s(e).state.user.email=n),label:"E-mail",variant:"outlined"},{label:o(()=>[a(p,{label:"E-mail"})]),_:1},8,["modelValue"])]),_:1}),a(c,{cols:"12",md:"6"},{default:o(()=>[a(l,{label:"Senha",type:"password",modelValue:s(e).state.user.password,"onUpdate:modelValue":t[2]||(t[2]=n=>s(e).state.user.password=n),variant:"outlined"},D({_:2},[s(e).state.user.id<=0?{name:"label",fn:o(()=>[a(p,{label:"Senha"})]),key:"0"}:void 0]),1032,["modelValue"])]),_:1}),a(c,{cols:"12",md:"6"},{default:o(()=>[a(N,{modelValue:s(e).state.user.level,"onUpdate:modelValue":t[3]||(t[3]=n=>s(e).state.user.level=n),variant:"outlined",items:s(e).state.levels,"item-value":"id","item-title":"name"},{label:o(()=>[a(p,{label:"Nível"})]),_:1},8,["modelValue","items"])]),_:1})]),_:1})])]),i("div",T,[a(y,{color:"grey",text:"",onClick:b},{default:o(()=>t[5]||(t[5]=[_("Fechar")])),_:1}),a(y,{color:"green",type:"submit"},{default:o(()=>t[6]||(t[6]=[_("Salvar")])),_:1})])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{z as default};

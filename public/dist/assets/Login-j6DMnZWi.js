import{u as k,e as r,o as d,b as a,a as y,f as N,g as o,h as S,i as u,d as m,v as c,n as h,F as w}from"./main-CYPWvOCH.js";import{e as p,m as g,n as v}from"./model-aYdN6bid.js";import{M as P,a as l}from"./js.cookie-BbVLt4nS.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={class:"logo-container"},B={key:0,id:"preloader"},V={class:"logo-header"},M=["src"],D={class:"logo-body"},F={class:"middle"},L={__name:"Login",setup(T){const t=k();f(),_();function f(){p.on("navigate:start",()=>{t.commit("updateStateProperty",{objectName:"loading",value:!0})}),p.on("navigate:finish",()=>{t.commit("updateStateProperty",{objectName:"loading",value:!1})})}function _(){g.apiGet("login/check").then(s=>{s.data.check&&v(`${t.state.urlBase}`)})}function b(){t.commit("updateStateProperty",{objectName:"loading",value:!0});let s=new FormData;s.append("email",t.state.login.email),s.append("password",t.state.login.password),g.apiPost("login",s).then(e=>{t.commit("updateStateProperty",{objectName:"loading",value:!1}),i("success",e.data.success),l.set("_userid",e.data.user.userid),l.set("_username",e.data.user.username),l.set("_useremail",e.data.user.useremail),l.set("_userlevel",e.data.user.userlevel),l.set("_userlevelname",e.data.user.userlevelname),v(`${t.state.urlBase}`)}).catch(e=>{t.commit("updateStateProperty",{objectName:"loading",value:!1}),i("error",e.response.data.error)})}function i(s,e){t.commit("updateStateProperty",{objectName:"snackbar",value:{type:s,message:e,status:!0},mode:"replace"})}return(s,e)=>(d(),r(w,null,[a("div",x,[o(t).state.loading?(d(),r("div",B,e[2]||(e[2]=[a("span",{class:"loader"},null,-1)]))):N("",!0),a("div",V,[a("img",{src:`${o(t).state.urlBase}/img/logo.png`},null,8,M)]),a("div",D,[a("form",{onSubmit:S(b,["prevent"])},[e[5]||(e[5]=a("span",null,"Acesse sua conta",-1)),a("div",F,[a("div",null,[e[3]||(e[3]=a("label",null,[a("i",{class:"fa-solid fa-envelope"}),m(" E-mail: ")],-1)),u(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>o(t).state.login.email=n)},null,512),[[c,o(t).state.login.email]])]),a("div",null,[e[4]||(e[4]=a("label",null,[a("i",{class:"fa-solid fa-lock"}),m(" Senha: ")],-1)),u(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>o(t).state.login.password=n)},null,512),[[c,o(t).state.login.password]])])]),e[6]||(e[6]=a("button",null,"Acessar minha conta",-1))],32),a("span",{id:"snackbar",class:h(o(t).state.messages.success?"success":"error")},null,2)])]),y(P)],64))}},U=j(L,[["__scopeId","data-v-a1d83057"]]);export{U as default};
